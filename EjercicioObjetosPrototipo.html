<!DOCTYPE html>
<html>
    <body>
        <script>
         //Act 3.2
            function TV(nombre,categiria,unidades,precio){
                this.nombre = nombre;
                this.categiria = categiria;
                this.unidades = unidades;
                this.precio = precio;
                this.importe = function(){return this.unidades * this.precio};
            }

            var tvSamsumg = new TV("TV Samsung 42" , "Televisores" , "4" , "345.95");

            //Act 3.1
            function Producto(nombre,categiria,unidades,precio){
                this.nombre = nombre;
                this.categiria = categiria;
                this.unidades = unidades;
                this.precio = precio;
                this.importe = function(){return this.unidades * this.precio};            
            }
            

            /*Producto.prototype.getInfo = function(){
                return "Función getInfo: \n" +  this.nombre + " (" + this.categiria +"): " + this.unidades + " x " + this.precio + "€ = " + this.importe() + "€"
            }*/ 
            Producto.prototype.getInfo = function(){
                return this.nombre + " ; " + this.categiria +" ; " + this.importe() +"€"
            }


            //aquí implementamos la función toString de la actividad 4.1
           /* Producto.prototype.toString = function () {
                return "Función toString: \n Nombre: " + this.nombre + "\n Unidades: " + this.unidades + "\n Precio: " + this.precio +"€";
            }; */
            //para la parte de funciones solo usamos el this nombre para qe no saque todo
            Producto.prototype.toString = function () {
                return this.nombre;
            }; 

            //y aquí hacemos la función toValue
            Producto.prototype.valueOf = function () {
                return "Función valueOf: \n El importe que ha de pagar es: " + this.importe() + "€";
            };


            const arrayProductos =[
                prod1 = new Producto("TV Samsung + 65" , "Televisor" , "5" , "654.33"),
                prod2 = new Producto("Samsung Galaxy A6" , "Movil" , "20" , "300.40"),
                prod3 = new Producto("HP pro", "Portatil" , "10" , "699.99")   
            ];
           /*alert(prod1.getInfo());
            alert(prod1.toString());
            alert(prod1.valueOf());*/
            
            //Act 3.3
            function Televisores(nombre,categiria,unidades,precio,tam){
                Producto.call(this,nombre,categiria,unidades,precio);
                this.tamaño = tam;
            }

            Televisores.prototype = Object.create(Producto.prototype);

            Televisores.prototype.getInf = function(){
                return "Función GetInfo: \n" + this.nombre + " " + this.tamaño + " (" + this.categiria +"): " + this.unidades + " x " + this.precio + "€ = " + this.importe() + "€"; 
            }

               //y la función toString para el objeto televisor
            Televisores.prototype.toString = function () {
                return "Función toString:" + " \n Nombre: " + this.nombre + "\n Unidades: " + this.unidades + "\n Precio: "+ this.precio + "\n Importe: " + this.importe() + "€ \n Tamaño: " + this.tamaño;
            };

            //función toValue para televisor
            Televisores.prototype.valueOf = function () {
                return "Función valueOf: \n Categoría: " + this.categiria + "\n Unidades: " + this.unidades + "\n Precio: " + this.precio + "€";
            };


        var tel1 = new Televisores("TV LG", "Televisor" , "8" , "300.77" , "6");
        /*alert(tel1.getInf());
        alert(tel1.toString());
        alert(tel1.valueOf());*/

        //Act 4.4
        const arr =[
        pr1 = new Producto ("Samsung Galaxy A23" , "Móvil" , "64" , "239.00€"),
        pr2 = new Producto ("Chuwi GemiBook Xp" , "Portatil", "80" , "249.00€"),
        pr3 = new Producto ("HUAWEI MateBook B3" , "Portatil", "54" , "499.90€"),
        pr4 = new Producto ("TV QLED V3+" , "Televisor", "40" , "2999.70€"),
        pr5 = new Producto ("Samsung TV QE1C 4K" , "Televisor", "22" , "539.65€")
        ];

        function prodOrdenadoPorNombre(arr){
            return arr.sort();
        }
        var arrOrdenado = prodOrdenadoPorNombre(arr);
        alert("El array ordenado: \n" +  arrOrdenado);

        function prodOrdenPorPrecio(arr){
            return arr.sort(precio);
        }
        var arrayOrd = prodOrdenPorPrecio(arr);
        alert("Orden de precios: " + prodOrdenPorPrecio(arr));

        function prodPrecioTotal(arr){
            const total = arr.reduce((sum, product) => sum + product.importe(), 0);
            return total.toFixed(2);
        }
        //alert(Number(prodPrecioTotal(arr)));

        function prodConMenosUnidades(arr, cantidad){
            return arr.filter((product) => product.unidades < cantidad);
        }
        //alert(prodConMenosUnidades(arr));

        function prodLista(arr){
            const lista = arr.map((product) => `- ${product.getInfo()}`).join('\n');
            return `Listado de productos:\n${lista}`;
        }
        alert(prodLista(arr));



        


    
</script>